<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Happy New Year Santosh 2026</title>

<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700;800&display=swap" rel="stylesheet">

<style>
html,body{
    margin:0;
    padding:0;
    background:#000;
    overflow:hidden;
    font-family:'Baloo 2', system-ui;
}

canvas{
    position:fixed;
    inset:0;
    z-index:1;
}

#content{
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:3;
    pointer-events:none;
}

#text-box{
    text-align:center;
}

#title{
    font-size:clamp(52px,9vw,150px);
    font-weight:800;
    background:linear-gradient(90deg,#ff4ecd,#8a5cff,#00e5ff,#ffd700);
    background-size:300% 100%;
    animation:gradientMove 6s linear infinite;
    -webkit-background-clip:text;
    color:transparent;
    text-shadow:0 12px 40px rgba(255,120,255,.35);
}

#name{
    margin-top:14px;
    font-size:clamp(40px,6vw,110px);
    background:linear-gradient(90deg,#ffffff,#00e5ff,#ffffff);
    -webkit-background-clip:text;
    color:transparent;
    text-shadow:0 14px 40px rgba(0,200,255,.45);
}

#year{
    margin-top:10px;
    font-size:clamp(36px,5vw,90px);
    letter-spacing:8px;
    color:#ffd700;
    text-shadow:
        0 0 20px rgba(255,215,0,.7),
        0 0 70px rgba(255,215,0,.4);
}

@keyframes gradientMove{
    from{background-position:0%}
    to{background-position:100%}
}

#hint{
    position:fixed;
    bottom:16px;
    right:16px;
    font-size:12px;
    color:#fff;
    opacity:.7;
    z-index:5;
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<div id="content">
    <div id="text-box">
        <div id="title">Happy New Year</div>
        <div id="name">Santosh</div>
        <div id="year">2026</div>
    </div>
</div>

<div id="hint">Tap / Click for sound</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<script>
/* ================= TEXT ANIMATIONS ================= */
const tl = gsap.timeline({repeat:-1, repeatDelay:.6});

tl.from("#title",{
    y:40, opacity:0, scale:.9,
    duration:1.1, ease:"power3.out"
})
.from("#name",{
    scale:0, rotation:-8, opacity:0,
    duration:1.2, ease:"elastic.out(1,.4)"
},"-=.4")
.from("#year",{
    scale:2, opacity:0,
    duration:1.2, ease:"expo.out"
},"-=.3")
.to("#year",{
    textShadow:"0 0 80px rgba(255,215,0,.9)",
    duration:1.6, yoyo:true, repeat:1, ease:"sine.inOut"
})
.to("#text-box",{
    opacity:0, scale:.96, duration:1
});

/* ================= CANVAS ================= */
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
let cw,ch,dpr;

function resize(){
    dpr=Math.min(devicePixelRatio,2);
    cw=innerWidth; ch=innerHeight;
    canvas.width=cw*dpr;
    canvas.height=ch*dpr;
    canvas.style.width=cw+"px";
    canvas.style.height=ch+"px";
    ctx.setTransform(dpr,0,0,dpr,0,0);
}
resize();
addEventListener("resize",resize);

/* ================= FIREWORKS ================= */
let fireworks=[],particles=[],hue=0;

class Firework{
    constructor(tx,ty){
        this.x=cw/2;
        this.y=ch;
        this.tx=tx; this.ty=ty;
        this.angle=Math.atan2(ty-this.y,tx-this.x);
        this.speed=4.8;           // ðŸ”¥ FASTER
        this.accel=1.06;          // ðŸ”¥ FASTER
        this.done=false;
        playLaunch();
    }
    update(){
        this.speed*=this.accel;
        this.x+=Math.cos(this.angle)*this.speed;
        this.y+=Math.sin(this.angle)*this.speed;
        if(Math.abs(this.y-this.ty)<18){
            explode(this.tx,this.ty);
            this.done=true;
        }
    }
    draw(){
        ctx.strokeStyle=`hsl(${hue},100%,60%)`;
        ctx.beginPath();
        ctx.moveTo(this.x,this.y);
        ctx.lineTo(this.x-3,this.y-3);
        ctx.stroke();
    }
}

class Particle{
    constructor(x,y){
        this.x=x; this.y=y;
        this.a=Math.random()*Math.PI*2;
        this.s=Math.random()*9+4; // ðŸ”¥ STRONGER
        this.f=.93;
        this.g=.7;               // ðŸ”¥ LESS DROP
        this.alpha=1;
        this.decay=Math.random()*.025+.02;
        this.h=hue+Math.random()*50;
    }
    update(){
        this.s*=this.f;
        this.x+=Math.cos(this.a)*this.s;
        this.y+=Math.sin(this.a)*this.s+this.g;
        this.alpha-=this.decay;
    }
    draw(){
        ctx.strokeStyle=`hsla(${this.h},100%,60%,${this.alpha})`;
        ctx.beginPath();
        ctx.moveTo(this.x,this.y);
        ctx.lineTo(this.x-2,this.y-2);
        ctx.stroke();
    }
}

function explode(x,y){
    playExplosion();
    for(let i=0;i<90;i++)particles.push(new Particle(x,y));
}

function loop(){
    requestAnimationFrame(loop);
    hue+=.8;

    ctx.fillStyle="rgba(0,0,0,.3)";
    ctx.fillRect(0,0,cw,ch);

    fireworks=fireworks.filter(f=>!f.done);
    particles=particles.filter(p=>p.alpha>0);

    fireworks.forEach(f=>{f.update();f.draw();});
    particles.forEach(p=>{p.update();p.draw();});

    if(Math.random()<.07)
        fireworks.push(new Firework(Math.random()*cw,Math.random()*ch*.45));
}
loop();

/* ================= USE UPLOADED MP3 FOR SOUNDS ================= */
/*
  This section replaces the previous synthesized sounds.
  It decodes the provided MP3 (fireworks-08-419026.mp3) into a buffer
  and plays short slices for launch and explosion events.
  Make sure the MP3 file is located in the same folder and named:
    fireworks-08-419026.mp3
*/

let audioCtx, enabled=false, audioBuffer=null;
const AUDIO_FILE = 'fireworks-08-419026.mp3';

async function initAudio(){
    if(enabled) return;
    try{
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        enabled = true;
        document.getElementById("hint").style.display="none";

        // Fetch and decode the mp3 file once
        const resp = await fetch(AUDIO_FILE);
        const arrayBuffer = await resp.arrayBuffer();
        audioBuffer = await audioCtx.decodeAudioData(arrayBuffer);
    }catch(e){
        // If fetching/decoding fails, disable audio gracefully
        console.warn("Audio initialization failed:", e);
        enabled = false;
        audioBuffer = null;
    }
}

function playLaunch(){
    if(!enabled || !audioBuffer) return;
    const src = audioCtx.createBufferSource();
    src.buffer = audioBuffer;

    // Slightly increase rate for a quick launch pitch
    src.playbackRate.value = 1.6 + Math.random()*0.4;

    const g = audioCtx.createGain();
    // Quick attack & short release to make it sound like a launch
    const now = audioCtx.currentTime;
    g.gain.setValueAtTime(0.001, now);
    g.gain.linearRampToValueAtTime(0.08, now + 0.02);
    g.gain.linearRampToValueAtTime(0.001, now + 0.45);

    src.connect(g).connect(audioCtx.destination);

    // Play a short slice from the start of the file (assumes file contains percussive sounds)
    // Adjust the offset/length if you prefer a different segment of the mp3.
    try {
        src.start(0, 0.0, 0.6);
    } catch (e) {
        // fallback: start without specifying slice
        src.start();
    }
}

function playExplosion(){
    if(!enabled || !audioBuffer) return;
    const src = audioCtx.createBufferSource();
    src.buffer = audioBuffer;

    // Slight random variation in playback rate to avoid repetition
    src.playbackRate.value = 0.85 + Math.random()*0.5;

    const g = audioCtx.createGain();
    const now = audioCtx.currentTime;
    g.gain.setValueAtTime(0.001, now);
    g.gain.linearRampToValueAtTime(0.14, now + 0.04);
    g.gain.linearRampToValueAtTime(0.001, now + 1.9);

    src.connect(g).connect(audioCtx.destination);

    // Play a slice that likely contains an explosion/crackle.
    // Offset is randomized inside a small range to get natural variety.
    const offset = 0.5 + Math.random()*0.9; // seconds into the file
    const duration = 1.6; // play ~1.6s
    try {
        src.start(0, offset, duration);
    } catch (e) {
        // fallback: start without specifying slice
        src.start();
    }
}

// Start audio on first user gesture
addEventListener("pointerdown", () => { initAudio(); }, {once:true});
</script>

</body>
</html>
